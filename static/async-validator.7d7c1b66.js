function F(){return F=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}return i},F.apply(this,arguments)}function re(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,D(i,e)}function L(i){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},L(i)}function D(i,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},D(i,e)}function ne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function G(i,e,r){return ne()?G=Reflect.construct.bind():G=function(t,f,a){var o=[null];o.push.apply(o,f);var u=Function.bind.apply(t,o),y=new u;return a&&D(y,a.prototype),y},G.apply(null,arguments)}function te(i){return Function.toString.call(i).indexOf("[native code]")!==-1}function M(i){var e=typeof Map=="function"?new Map:void 0;return M=function(n){if(n===null||!te(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,t)}function t(){return G(n,arguments,L(this).constructor)}return t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),D(t,n)},M(i)}var ie=/%[sdj%]/g,Z=function(){};typeof process<"u"&&{DEPLOYMENT_BASEPATH:"/opt/runner",DOTNET_NOLOGO:"1",USER:"runner",npm_config_user_agent:"npm/8.15.0 node/v16.17.0 linux x64 workspaces/false ci/github-actions",CI:"true",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_24a14192-38af-410d-86c4-99b7c2ad0aa1",PIPX_HOME:"/opt/pipx",npm_node_execpath:"/usr/local/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",SHLVL:"1",npm_config_noproxy:"",HOME:"/home/runner",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",npm_package_json:"/home/runner/work/vue-vite-ts-admin/vue-vite-ts-admin/package.json",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GRAALVM_11_ROOT:"/usr/local/graalvm/graalvm-ce-java11-22.2.0",GITHUB_REPOSITORY_OWNER:"zzhStrive",GRADLE_HOME:"/usr/share/gradle-7.5.1",HOMEBREW_PREFIX:"/home/linuxbrew/.linuxbrew",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/25.1.8937393",GITHUB_RETENTION_DAYS:"90",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu20",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",npm_config_userconfig:"/home/runner/.npmrc",npm_config_local_prefix:"/home/runner/work/vue-vite-ts-admin/vue-vite-ts-admin",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",COLOR:"0",NVM_DIR:"/home/runner/.nvm",npm_config_metrics_registry:"https://registry.npmjs.org/",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20220905.1",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",SWIFT_PATH:"/usr/share/swift/usr/bin",RUNNER_USER:"runner",CHROMEWEBDRIVER:"/usr/local/share/chrome_driver",JOURNAL_STREAM:"8:20289",GITHUB_WORKFLOW:"Build and Deploy",_:"/usr/local/bin/npm",npm_config_prefix:"/usr/local",GITHUB_RUN_ID:"3066943763",npm_config_cache:"/home/runner/.npm",GOROOT_1_17_X64:"/opt/hostedtoolcache/go/1.17.13/x64",GITHUB_REF_TYPE:"branch",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_BASE_REF:"",ImageOS:"ubuntu20",PERFLOG_LOCATION_SETTING:"RUNNER_PERFLOG",GOROOT_1_18_X64:"/opt/hostedtoolcache/go/1.18.5/x64",GITHUB_ACTION_REPOSITORY:"",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/vue-vite-ts-admin/vue-vite-ts-admin/node_modules/.bin:/home/runner/work/vue-vite-ts-admin/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/home/linuxbrew/.linuxbrew/bin:/home/linuxbrew/.linuxbrew/sbin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_ea81c2bc-212e-451f-833d-dfd3a163542e",INVOCATION_ID:"ee6e7e55b8cf44afa2d7a8caaa54055e",HOMEBREW_CELLAR:"/home/linuxbrew/.linuxbrew/Cellar",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",GOROOT_1_19_X64:"/opt/hostedtoolcache/go/1.19.0/x64",NODE:"/usr/local/bin/node",npm_package_name:"vue3-vite-admin",GITHUB_ACTION:"__run",GITHUB_RUN_NUMBER:"5",GITHUB_TRIGGERING_ACTOR:"zzhStrive",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",CONDA:"/usr/share/miniconda",RUNNER_NAME:"Hosted Agent",XDG_CONFIG_HOME:"/home/runner/.config",GITHUB_REF_NAME:"master",GITHUB_REPOSITORY:"zzhStrive/vue-vite-ts-admin",npm_lifecycle_script:"vite build --mode prod_mock",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/25.1.8937393",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",GITHUB_ACTIONS:"true",STATS_KEEPALIVE:"false",STATS_PFS:"true",npm_package_version:"1.4.0",npm_lifecycle_event:"build:mock",GITHUB_REF_PROTECTED:"false",GITHUB_WORKSPACE:"/home/runner/work/vue-vite-ts-admin/vue-vite-ts-admin",ACCEPT_EULA:"Y",GITHUB_JOB:"build-and-deploy",RUNNER_PERFLOG:"/home/runner/perflog",npm_package_config_commitizen_path:"cz-conventional-changelog",GITHUB_SHA:"ec437d28815940bab76656a5c0b7c7ea61ed9c61",GITHUB_RUN_ATTEMPT:"1",GITHUB_REF:"refs/heads/master",GITHUB_ACTOR:"zzhStrive",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",LEIN_HOME:"/usr/local/lib/lein",npm_config_globalconfig:"/usr/local/etc/npmrc",npm_config_init_module:"/home/runner/.npm-init.js",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_24a14192-38af-410d-86c4-99b7c2ad0aa1",JAVA_HOME:"/usr/lib/jvm/temurin-11-jdk-amd64",PWD:"/home/runner/work/vue-vite-ts-admin/vue-vite-ts-admin",RUNNER_WORKSPACE:"/home/runner/work/vue-vite-ts-admin",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",GITHUB_EVENT_NAME:"push",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",LEIN_JAR:"/usr/local/lib/lein/self-installs/leiningen-2.9.10-standalone.jar",npm_config_global_prefix:"/usr/local",EDGEWEBDRIVER:"/usr/local/share/edge_driver",HOMEBREW_REPOSITORY:"/home/linuxbrew/.linuxbrew/Homebrew",npm_command:"run-script",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/25.1.8937393",SGX_AESM_ADDR:"1",CHROME_BIN:"/usr/bin/google-chrome",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/25.1.8937393",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_24a14192-38af-410d-86c4-99b7c2ad0aa1",INIT_CWD:"/home/runner/work/vue-vite-ts-admin/vue-vite-ts-admin",EDITOR:"vi"}&&!0&&typeof window<"u"&&typeof document<"u"&&(Z=function(e,r){typeof console<"u"&&console.warn&&typeof ASYNC_VALIDATOR_NO_WARNING>"u"&&r.every(function(n){return typeof n=="string"})&&console.warn(e,r)});function V(i){if(!i||!i.length)return null;var e={};return i.forEach(function(r){var n=r.field;e[n]=e[n]||[],e[n].push(r)}),e}function b(i){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var t=0,f=r.length;if(typeof i=="function")return i.apply(null,r);if(typeof i=="string"){var a=i.replace(ie,function(o){if(o==="%%")return"%";if(t>=f)return o;switch(o){case"%s":return String(r[t++]);case"%d":return Number(r[t++]);case"%j":try{return JSON.stringify(r[t++])}catch{return"[Circular]"}break;default:return o}});return a}return i}function ae(i){return i==="string"||i==="url"||i==="hex"||i==="email"||i==="date"||i==="pattern"}function g(i,e){return!!(i==null||e==="array"&&Array.isArray(i)&&!i.length||ae(e)&&typeof i=="string"&&!i)}function fe(i,e,r){var n=[],t=0,f=i.length;function a(o){n.push.apply(n,o||[]),t++,t===f&&r(n)}i.forEach(function(o){e(o,a)})}function X(i,e,r){var n=0,t=i.length;function f(a){if(a&&a.length){r(a);return}var o=n;n=n+1,o<t?e(i[o],f):r([])}f([])}function oe(i){var e=[];return Object.keys(i).forEach(function(r){e.push.apply(e,i[r]||[])}),e}var z=function(i){re(e,i);function e(r,n){var t;return t=i.call(this,"Async Validation Error")||this,t.errors=r,t.fields=n,t}return e}(M(Error));function se(i,e,r,n,t){if(e.first){var f=new Promise(function(v,T){var R=function(s){return n(s),s.length?T(new z(s,V(s))):v(t)},d=oe(i);X(d,r,R)});return f.catch(function(v){return v}),f}var a=e.firstFields===!0?Object.keys(i):e.firstFields||[],o=Object.keys(i),u=o.length,y=0,_=[],h=new Promise(function(v,T){var R=function(l){if(_.push.apply(_,l),y++,y===u)return n(_),_.length?T(new z(_,V(_))):v(t)};o.length||(n(_),v(t)),o.forEach(function(d){var l=i[d];a.indexOf(d)!==-1?X(l,r,R):fe(l,r,R)})});return h.catch(function(v){return v}),h}function ue(i){return!!(i&&i.message!==void 0)}function de(i,e){for(var r=i,n=0;n<e.length;n++){if(r==null)return r;r=r[e[n]]}return r}function Y(i,e){return function(r){var n;return i.fullFields?n=de(e,i.fullFields):n=e[r.field||i.fullField],ue(r)?(r.field=r.field||i.fullField,r.fieldValue=n,r):{message:typeof r=="function"?r():r,fieldValue:n,field:r.field||i.fullField}}}function $(i,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];typeof n=="object"&&typeof i[r]=="object"?i[r]=F({},i[r],n):i[r]=n}}return i}var Q=function(e,r,n,t,f,a){e.required&&(!n.hasOwnProperty(e.field)||g(r,a||e.type))&&t.push(b(f.messages.required,e.fullField))},ce=function(e,r,n,t,f){(/^\s+$/.test(r)||r==="")&&t.push(b(f.messages.whitespace,e.fullField))},S,pe=function(){if(S)return S;var i="[a-fA-F\\d:]",e=function(m){return m&&m.includeBoundaries?"(?:(?<=\\s|^)(?="+i+")|(?<="+i+")(?=\\s|$))":""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",t=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+r+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+r+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+r+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+r+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+r+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+r+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+r+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),f=new RegExp("(?:^"+r+"$)|(?:^"+t+"$)"),a=new RegExp("^"+r+"$"),o=new RegExp("^"+t+"$"),u=function(m){return m&&m.exact?f:new RegExp("(?:"+e(m)+r+e(m)+")|(?:"+e(m)+t+e(m)+")","g")};u.v4=function(p){return p&&p.exact?a:new RegExp(""+e(p)+r+e(p),"g")},u.v6=function(p){return p&&p.exact?o:new RegExp(""+e(p)+t+e(p),"g")};var y="(?:(?:[a-z]+:)?//)",_="(?:\\S+(?::\\S*)?@)?",h=u.v4().source,v=u.v6().source,T="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",R="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",d="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",l="(?::\\d{2,5})?",s='(?:[/?#][^\\s"]*)?',N="(?:"+y+"|www\\.)"+_+"(?:localhost|"+h+"|"+v+"|"+T+R+d+")"+l+s;return S=new RegExp("(?:^"+N+"$)","i"),S},J={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},H={integer:function(e){return H.number(e)&&parseInt(e,10)===e},float:function(e){return H.number(e)&&!H.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!H.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(J.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(pe())},hex:function(e){return typeof e=="string"&&!!e.match(J.hex)}},me=function(e,r,n,t,f){if(e.required&&r===void 0){Q(e,r,n,t,f);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=e.type;a.indexOf(o)>-1?H[o](r)||t.push(b(f.messages.types[o],e.fullField,e.type)):o&&typeof r!==e.type&&t.push(b(f.messages.types[o],e.fullField,e.type))},le=function(e,r,n,t,f){var a=typeof e.len=="number",o=typeof e.min=="number",u=typeof e.max=="number",y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_=r,h=null,v=typeof r=="number",T=typeof r=="string",R=Array.isArray(r);if(v?h="number":T?h="string":R&&(h="array"),!h)return!1;R&&(_=r.length),T&&(_=r.replace(y,"_").length),a?_!==e.len&&t.push(b(f.messages[h].len,e.fullField,e.len)):o&&!u&&_<e.min?t.push(b(f.messages[h].min,e.fullField,e.min)):u&&!o&&_>e.max?t.push(b(f.messages[h].max,e.fullField,e.max)):o&&u&&(_<e.min||_>e.max)&&t.push(b(f.messages[h].range,e.fullField,e.min,e.max))},q="enum",_e=function(e,r,n,t,f){e[q]=Array.isArray(e[q])?e[q]:[],e[q].indexOf(r)===-1&&t.push(b(f.messages[q],e.fullField,e[q].join(", ")))},ge=function(e,r,n,t,f){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||t.push(b(f.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var a=new RegExp(e.pattern);a.test(r)||t.push(b(f.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},c={required:Q,whitespace:ce,type:me,range:le,enum:_e,pattern:ge},he=function(e,r,n,t,f){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(g(r,"string")&&!e.required)return n();c.required(e,r,t,a,f,"string"),g(r,"string")||(c.type(e,r,t,a,f),c.range(e,r,t,a,f),c.pattern(e,r,t,a,f),e.whitespace===!0&&c.whitespace(e,r,t,a,f))}n(a)},ve=function(e,r,n,t,f){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(g(r)&&!e.required)return n();c.required(e,r,t,a,f),r!==void 0&&c.type(e,r,t,a,f)}n(a)},ye=function(e,r,n,t,f){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(r===""&&(r=void 0),g(r)&&!e.required)return n();c.required(e,r,t,a,f),r!==void 0&&(c.type(e,r,t,a,f),c.range(e,r,t,a,f))}n(a)},Ee=function(e,r,n,t,f){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(g(r)&&!e.required)return n();c.required(e,r,t,a,f),r!==void 0&&c.type(e,r,t,a,f)}n(a)},Oe=function(e,r,n,t,f){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(g(r)&&!e.required)return n();c.required(e,r,t,a,f),g(r)||c.type(e,r,t,a,f)}n(a)},be=function(e,r,n,t,f){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(g(r)&&!e.required)return n();c.required(e,r,t,a,f),r!==void 0&&(c.type(e,r,t,a,f),c.range(e,r,t,a,f))}n(a)},Re=function(e,r,n,t,f){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(g(r)&&!e.required)return n();c.required(e,r,t,a,f),r!==void 0&&(c.type(e,r,t,a,f),c.range(e,r,t,a,f))}n(a)},Te=function(e,r,n,t,f){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(r==null&&!e.required)return n();c.required(e,r,t,a,f,"array"),r!=null&&(c.type(e,r,t,a,f),c.range(e,r,t,a,f))}n(a)},Ae=function(e,r,n,t,f){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(g(r)&&!e.required)return n();c.required(e,r,t,a,f),r!==void 0&&c.type(e,r,t,a,f)}n(a)},Ne="enum",we=function(e,r,n,t,f){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(g(r)&&!e.required)return n();c.required(e,r,t,a,f),r!==void 0&&c[Ne](e,r,t,a,f)}n(a)},Ie=function(e,r,n,t,f){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(g(r,"string")&&!e.required)return n();c.required(e,r,t,a,f),g(r,"string")||c.pattern(e,r,t,a,f)}n(a)},xe=function(e,r,n,t,f){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(g(r,"date")&&!e.required)return n();if(c.required(e,r,t,a,f),!g(r,"date")){var u;r instanceof Date?u=r:u=new Date(r),c.type(e,u,t,a,f),u&&c.range(e,u.getTime(),t,a,f)}}n(a)},Fe=function(e,r,n,t,f){var a=[],o=Array.isArray(r)?"array":typeof r;c.required(e,r,t,a,f,o),n(a)},j=function(e,r,n,t,f){var a=e.type,o=[],u=e.required||!e.required&&t.hasOwnProperty(e.field);if(u){if(g(r,a)&&!e.required)return n();c.required(e,r,t,o,f,a),g(r,a)||c.type(e,r,t,o,f)}n(o)},qe=function(e,r,n,t,f){var a=[],o=e.required||!e.required&&t.hasOwnProperty(e.field);if(o){if(g(r)&&!e.required)return n();c.required(e,r,t,a,f)}n(a)},U={string:he,method:ve,number:ye,boolean:Ee,regexp:Oe,integer:be,float:Re,array:Te,object:Ae,enum:we,pattern:Ie,date:xe,url:j,hex:j,email:j,required:Fe,any:qe};function k(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var C=k(),B=function(){function i(r){this.rules=null,this._messages=C,this.define(r)}var e=i.prototype;return e.define=function(n){var t=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(f){var a=n[f];t.rules[f]=Array.isArray(a)?a:[a]})},e.messages=function(n){return n&&(this._messages=$(k(),n)),this._messages},e.validate=function(n,t,f){var a=this;t===void 0&&(t={}),f===void 0&&(f=function(){});var o=n,u=t,y=f;if(typeof u=="function"&&(y=u,u={}),!this.rules||Object.keys(this.rules).length===0)return y&&y(null,o),Promise.resolve(o);function _(d){var l=[],s={};function N(m){if(Array.isArray(m)){var O;l=(O=l).concat.apply(O,m)}else l.push(m)}for(var p=0;p<d.length;p++)N(d[p]);l.length?(s=V(l),y(l,s)):y(null,o)}if(u.messages){var h=this.messages();h===C&&(h=k()),$(h,u.messages),u.messages=h}else u.messages=this.messages();var v={},T=u.keys||Object.keys(this.rules);T.forEach(function(d){var l=a.rules[d],s=o[d];l.forEach(function(N){var p=N;typeof p.transform=="function"&&(o===n&&(o=F({},o)),s=o[d]=p.transform(s)),typeof p=="function"?p={validator:p}:p=F({},p),p.validator=a.getValidationMethod(p),p.validator&&(p.field=d,p.fullField=p.fullField||d,p.type=a.getType(p),v[d]=v[d]||[],v[d].push({rule:p,value:s,source:o,field:d}))})});var R={};return se(v,u,function(d,l){var s=d.rule,N=(s.type==="object"||s.type==="array")&&(typeof s.fields=="object"||typeof s.defaultField=="object");N=N&&(s.required||!s.required&&d.value),s.field=d.field;function p(E,x){return F({},x,{fullField:s.fullField+"."+E,fullFields:s.fullFields?[].concat(s.fullFields,[E]):[E]})}function m(E){E===void 0&&(E=[]);var x=Array.isArray(E)?E:[E];!u.suppressWarning&&x.length&&i.warning("async-validator:",x),x.length&&s.message!==void 0&&(x=[].concat(s.message));var w=x.map(Y(s,o));if(u.first&&w.length)return R[s.field]=1,l(w);if(!N)l(w);else{if(s.required&&!d.value)return s.message!==void 0?w=[].concat(s.message).map(Y(s,o)):u.error&&(w=[u.error(s,b(u.messages.required,s.field))]),l(w);var P={};s.defaultField&&Object.keys(d.value).map(function(I){P[I]=s.defaultField}),P=F({},P,d.rule.fields);var W={};Object.keys(P).forEach(function(I){var A=P[I],ee=Array.isArray(A)?A:[A];W[I]=ee.map(p.bind(null,I))});var K=new i(W);K.messages(u.messages),d.rule.options&&(d.rule.options.messages=u.messages,d.rule.options.error=u.error),K.validate(d.value,d.rule.options||u,function(I){var A=[];w&&w.length&&A.push.apply(A,w),I&&I.length&&A.push.apply(A,I),l(A.length?A:null)})}}var O;if(s.asyncValidator)O=s.asyncValidator(s,d.value,m,d.source,u);else if(s.validator){try{O=s.validator(s,d.value,m,d.source,u)}catch(E){console.error==null||console.error(E),u.suppressValidatorError||setTimeout(function(){throw E},0),m(E.message)}O===!0?m():O===!1?m(typeof s.message=="function"?s.message(s.fullField||s.field):s.message||(s.fullField||s.field)+" fails"):O instanceof Array?m(O):O instanceof Error&&m(O.message)}O&&O.then&&O.then(function(){return m()},function(E){return m(E)})},function(d){_(d)},o)},e.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!U.hasOwnProperty(n.type))throw new Error(b("Unknown rule type %s",n.type));return n.type||"string"},e.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var t=Object.keys(n),f=t.indexOf("message");return f!==-1&&t.splice(f,1),t.length===1&&t[0]==="required"?U.required:U[this.getType(n)]||void 0},i}();B.register=function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");U[e]=r};B.warning=Z;B.messages=C;B.validators=U;export{B as S};
